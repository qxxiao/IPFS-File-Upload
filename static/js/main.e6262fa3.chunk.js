(this["webpackJsonpipfs-file-uploader"]=this["webpackJsonpipfs-file-uploader"]||[]).push([[0],{133:function(e,t,c){},134:function(e,t,c){},135:function(e,t,c){},137:function(e,t,c){},214:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c.n(n),a=c(28),r=c.n(a),s=(c(133),c(134),c(135),c(12));var o=function(){return Object(s.jsxs)("div",{className:"header-div",children:[Object(s.jsx)("div",{className:"header-img",children:Object(s.jsx)("img",{src:"https://gitee.com/qxxiao_hust/pic/raw/master/img/20211029144222.png",alt:"logo"})}),Object(s.jsx)("div",{className:"header-title",children:"IPFS-File-Uploader"}),Object(s.jsx)("div",{className:"header-link gateway",children:Object(s.jsx)("a",{className:"link",href:"https://ipfs.github.io/public-gateway-checker/",target:"_blank",rel:"noopener noreferrer",children:"Gateway"})}),Object(s.jsx)("div",{className:"header-link github",children:Object(s.jsx)("a",{className:"link",href:"https://github.com/qxxiao/IPFS-File-Uploader",target:"_blank",rel:"noopener noreferrer",children:"GitHub"})})]})},l=c(21),d=c(1),j=c.n(d),b=c(5),u=c(16),h=c(126),p=c(219),O=c(218),f=c(69),x=c(124),g=c(220),m=(c(137),c(110));function v(e){var t=Object(n.useState)([]),c=Object(u.a)(t,2),i=c[0],a=c[1],r=Object(n.useState)(!1),o=Object(u.a)(r,2),d=o[0],x=o[1],v={onRemove:function(t){return a((function(e){var c=e.indexOf(t),n=e.slice();return n.splice(c,1),n})),e.changeCid(""),e.changePercent(0),!0},beforeUpload:function(t){return a((function(){return[t]})),e.changeCid(""),e.changePercent(0),!1},fileList:i},w=function(){var t=Object(b.a)(j.a.mark((function t(){var c,n,a,r,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),c=new m.a({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDQ0RTFDMzZkREM5NjI2MjY1ZWM5OWJhNkUwYzZmZDE0Y0I3MjA2NkUiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2MzU1NzM4NzIyNTYsIm5hbWUiOiJ1cGxvYWRlciJ9.qJ4Q_9IaazEYoy9qey5dCVCGw7O315kbbODobUnBW1I"}),n=function(t){console.log("uploading files with cid:",t),e.changeCid(t)},a=i.map((function(e){return e.size})).reduce((function(e,t){return(void 0===e?0:e)+(void 0===t?0:t)}),0),r=0,s=function(t){var c=(r+=t)/a*100;console.log("Uploading... ".concat(c.toFixed(2),"% complete")),r>=a&&(x(!1),h.b.success("\u4e0a\u4f20\u6587\u4ef6\u6210\u529f!")),e.changePercent(parseInt(c.toFixed()))},t.next=8,c.put(i,{name:encodeURIComponent(i[0].name),wrapWithDirectory:!1,maxRetries:3,onRootCidReady:n,onStoredChunk:s});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.jsxs)("div",{className:"inputFile1",children:[Object(s.jsx)("div",{className:"input1",style:{width:"65%"},children:Object(s.jsx)(p.a,{addonBefore:"http://",placeholder:"\u4e0a\u4f20\u7684\u6587\u4ef6\u5730\u5740",allowClear:!0,size:"large"})}),Object(s.jsx)("div",{className:"upload1",style:{width:"85px"},children:Object(s.jsx)(O.a,Object(l.a)(Object(l.a)({},v),{},{maxCount:1,children:Object(s.jsx)(f.a,{size:"large",children:"Browse"})}))}),Object(s.jsx)("div",{className:"button1",style:{width:"120px"},children:Object(s.jsx)(f.a,{icon:Object(s.jsx)(g.a,{}),type:"primary",onClick:w,disabled:0===i.length,loading:d,size:"large",style:{width:"120px"},children:d?"Uploading":"Upload"})})]})}function w(e){var t=Object(n.useState)(""),c=Object(u.a)(t,2),i=c[0],a=c[1],r=Object(n.useState)(""),o=Object(u.a)(r,2),l=o[0],d=o[1],j=Object(n.useState)(""),b=Object(u.a)(j,2),h=b[0],p=b[1];return Object(n.useEffect)((function(){d(""===i?"":"https://ipfs.io/ipfs/"+i),p(""===i?"":"https://dweb.link/ipns/ipnso.com/?cid="+i)}),[i]),Object(n.useEffect)((function(){a(e.cid)}),[e.cid]),Object(s.jsxs)("div",{id:"textTip-id",children:[Object(s.jsxs)("p",{children:["File uploaded to:",Object(s.jsx)("br",{}),i]}),Object(s.jsxs)("p",{children:["You Can access the file using public gateways now:",Object(s.jsx)("br",{}),Object(s.jsx)("a",{href:"https://ipfs.io/ipfs/"+i,target:"_blank",rel:"noreferrer","white-space":"nowrap",children:l}),Object(s.jsx)("br",{}),Object(s.jsx)("a",{href:"https://dweb.link/ipns/ipnso.com/?cid="+i,target:"_blank",rel:"noreferrer","white-space":"nowrap",children:h})]})]})}var N=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)(0),r=Object(u.a)(a,2),o=r[0],l=r[1];return Object(s.jsxs)("div",{className:"uploader-div",children:[Object(s.jsx)("div",{className:"title",children:Object(s.jsx)("h1",{children:"IPFS File Uploader"})}),Object(s.jsx)("div",{className:"inputFile-div",children:Object(s.jsx)(v,{changeCid:function(e){i(e)},changePercent:function(e){l(e)}})}),Object(s.jsx)("div",{className:"progress",children:Object(s.jsx)(x.a,{percent:o,status:"normal",showInfo:!0,style:{width:"46%",left:"-1%"}})}),Object(s.jsx)("div",{className:"textTip-div",children:Object(s.jsx)(w,{cid:c})})]})};var k=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(o,{}),Object(s.jsx)(N,{})]})},I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,221)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),i(e),a(e),r(e)}))};r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(k,{})}),document.getElementById("root")),I()}},[[214,1,2]]]);
//# sourceMappingURL=main.e6262fa3.chunk.js.map