(this["webpackJsonpipfs-file-uploader"]=this["webpackJsonpipfs-file-uploader"]||[]).push([[0],{119:function(e,t,c){},120:function(e,t,c){},121:function(e,t,c){},124:function(e,t,c){},194:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c.n(n),a=c(27),s=c.n(a),r=(c(119),c(120),c(121),c(14));var l=function(){return Object(r.jsxs)("div",{className:"header-div",children:[Object(r.jsx)("div",{className:"header-img",children:Object(r.jsx)("img",{src:"./imgs/ipfs.png",alt:"logo"})}),Object(r.jsx)("div",{className:"header-title",children:"IPFS-File-Uploader"}),Object(r.jsx)("div",{className:"header-link gateway",children:Object(r.jsx)("a",{className:"link",href:"https://ipfs.github.io/public-gateway-checker/",target:"_blank",rel:"noopener noreferrer",children:"Gateway"})}),Object(r.jsx)("div",{className:"header-link github",children:Object(r.jsx)("a",{className:"link",href:"https://github.com/qxxiao/IPFS-File-Uploader",target:"_blank",rel:"noopener noreferrer",children:"GitHub"})})]})},o=c(2),d=c(5),j=c(7),b=c(1),u=c.n(b),h=c(111),p=c(198),O=c(197),f=c(61),x=c(109),g=c(199),m=(c(124),c(99));function v(e){var t=Object(n.useState)([]),c=Object(j.a)(t,2),i=c[0],a=c[1],s=Object(n.useState)(!1),l=Object(j.a)(s,2),b=l[0],x=l[1],v={onRemove:function(t){return a((function(e){var c=e.indexOf(t),n=e.slice();return n.splice(c,1),n})),e.changeCid(""),e.changePercent(0),!0},beforeUpload:function(t){return a((function(){return[t]})),e.changeCid(""),e.changePercent(0),!1},fileList:i},w=function(){var t=Object(d.a)(u.a.mark((function t(){var c,n,a,s,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),c=new m.a({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDQ0RTFDMzZkREM5NjI2MjY1ZWM5OWJhNkUwYzZmZDE0Y0I3MjA2NkUiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2MzU1NzM4NzIyNTYsIm5hbWUiOiJ1cGxvYWRlciJ9.qJ4Q_9IaazEYoy9qey5dCVCGw7O315kbbODobUnBW1I"}),n=function(t){console.log("uploading files with cid:",t),e.changeCid(t)},a=i.map((function(e){return e.size})).reduce((function(e,t){return(void 0===e?0:e)+(void 0===t?0:t)}),0),s=0,r=function(t){var c=(s+=t)/a*100;console.log("Uploading... ".concat(c.toFixed(2),"% complete")),s>=a&&(x(!1),h.b.success("\u4e0a\u4f20\u6587\u4ef6\u6210\u529f!")),e.changePercent(parseInt(c.toFixed()))},t.next=8,c.put(i,{name:encodeURIComponent(i[0].name),wrapWithDirectory:!1,maxRetries:3,onRootCidReady:n,onStoredChunk:r});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"inputFile1",children:[Object(r.jsx)("div",{className:"input1",style:{width:"65%"},children:Object(r.jsx)(p.a,{addonBefore:"http://",placeholder:"\u4e0a\u4f20\u7684\u6587\u4ef6\u5730\u5740",allowClear:!0,size:"large"})}),Object(r.jsx)("div",{className:"upload1",style:{width:"85px"},children:Object(r.jsx)(O.a,Object(o.a)(Object(o.a)({},v),{},{maxCount:1,children:Object(r.jsx)(f.a,{size:"large",children:"Browse"})}))}),Object(r.jsx)("div",{className:"button1",style:{width:"120px"},children:Object(r.jsx)(f.a,{icon:Object(r.jsx)(g.a,{}),type:"primary",onClick:w,disabled:0===i.length,loading:b,size:"large",style:{width:"120px"},children:b?"Uploading":"Upload"})})]})}function w(e){var t=Object(n.useState)(""),c=Object(j.a)(t,2),i=c[0],a=c[1],s=Object(n.useState)(""),l=Object(j.a)(s,2),o=l[0],d=l[1],b=Object(n.useState)(""),u=Object(j.a)(b,2),h=u[0],p=u[1];return Object(n.useEffect)((function(){d(""===i?"":"https://ipfs.io/ipfs/"+i),p(""===i?"":"https://dweb.link/ipns/ipnso.com/?cid="+i)}),[i]),Object(n.useEffect)((function(){a(e.cid)}),[e.cid]),Object(r.jsxs)("div",{id:"textTip-id",children:[Object(r.jsxs)("p",{children:["File uploaded to:",Object(r.jsx)("br",{}),i]}),Object(r.jsxs)("p",{children:["You Can access the file using public gateways now:",Object(r.jsx)("br",{}),Object(r.jsx)("a",{href:"https://ipfs.io/ipfs/"+i,target:"_blank",rel:"noreferrer","white-space":"nowrap",children:o}),Object(r.jsx)("br",{}),Object(r.jsx)("a",{href:"https://dweb.link/ipns/ipnso.com/?cid="+i,target:"_blank",rel:"noreferrer","white-space":"nowrap",children:h})]})]})}var N=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)(0),s=Object(j.a)(a,2),l=s[0],o=s[1];return Object(r.jsxs)("div",{className:"uploader-div",children:[Object(r.jsx)("div",{className:"title",children:Object(r.jsx)("h1",{children:"IPFS File Uploader"})}),Object(r.jsx)("div",{className:"inputFile-div",children:Object(r.jsx)(v,{changeCid:function(e){i(e)},changePercent:function(e){o(e)}})}),Object(r.jsx)("div",{className:"progress",children:Object(r.jsx)(x.a,{percent:l,status:"normal",showInfo:!0,style:{width:"46%",left:"-1%"}})}),Object(r.jsx)("div",{className:"textTip-div",children:Object(r.jsx)(w,{cid:c})})]})};var k=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(l,{}),Object(r.jsx)(N,{})]})},I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,200)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),i(e),a(e),s(e)}))};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root")),I()}},[[194,1,2]]]);
//# sourceMappingURL=main.98557672.chunk.js.map