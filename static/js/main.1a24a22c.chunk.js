(this["webpackJsonpipfs-file-upload"]=this["webpackJsonpipfs-file-upload"]||[]).push([[0],{133:function(e,t,c){},134:function(e,t,c){},135:function(e,t,c){},137:function(e,t,c){},214:function(e,t,c){"use strict";c.r(t);var i=c(0),n=c.n(i),a=c(28),s=c.n(a),r=(c(133),c(134),c(135),c(12));var l=function(){return Object(r.jsxs)("div",{className:"header-div",children:[Object(r.jsx)("div",{className:"header-img",children:Object(r.jsx)("img",{src:"https://gitee.com/qxxiao_hust/pic/raw/master/img/20211029144222.png",alt:"logo"})}),Object(r.jsx)("div",{className:"header-title",children:"IPFS-File-Uploader"}),Object(r.jsx)("div",{className:"header-link gateway",children:Object(r.jsx)("a",{className:"link",href:"https://ipfs.github.io/public-gateway-checker/",target:"_blank",rel:"noopener noreferrer",children:"Gateway"})}),Object(r.jsx)("div",{className:"header-link github",children:Object(r.jsx)("a",{className:"link",href:"https://github.com/qxxiao/IPFS-File-Upload",target:"_blank",rel:"noopener noreferrer",children:"GitHub"})})]})},o=c(21),d=c(1),j=c.n(d),b=c(5),u=c(16),h=c(126),p=c(219),O=c(218),f=c(69),x=c(124),g=c(220),m=(c(137),c(110));function v(e){var t=Object(i.useState)([]),c=Object(u.a)(t,2),n=c[0],a=c[1],s=Object(i.useState)(!1),l=Object(u.a)(s,2),d=l[0],x=l[1],v={onRemove:function(e){return a((function(t){var c=t.indexOf(e),i=t.slice();return i.splice(c,1),i})),!0},beforeUpload:function(t){return a((function(){return[t]})),e.changeCid(""),e.changePercent(0),!1},fileList:n},w=function(){var t=Object(b.a)(j.a.mark((function t(){var c,i,a,s,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),c=new m.a({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDQ0RTFDMzZkREM5NjI2MjY1ZWM5OWJhNkUwYzZmZDE0Y0I3MjA2NkUiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2MzU1NzM4NzIyNTYsIm5hbWUiOiJ1cGxvYWRlciJ9.qJ4Q_9IaazEYoy9qey5dCVCGw7O315kbbODobUnBW1I"}),i=function(t){console.log("uploading files with cid:",t),e.changeCid(t)},a=n.map((function(e){return e.size})).reduce((function(e,t){return(void 0===e?0:e)+(void 0===t?0:t)}),0),s=0,r=function(t){var c=(s+=t)/a*100;console.log("Uploading... ".concat(c.toFixed(2),"% complete")),s>=a&&(x(!1),h.b.success("\u4e0a\u4f20\u6587\u4ef6\u6210\u529f!")),e.changePercent(c)},t.abrupt("return",c.put(n,{name:n[0].name,wrapWithDirectory:!1,maxRetries:3,onRootCidReady:i,onStoredChunk:r}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"inputFile1",children:[Object(r.jsx)("div",{className:"input1",style:{width:"65%"},children:Object(r.jsx)(p.a,{addonBefore:"http://",placeholder:"\u4e0a\u4f20\u7684\u6587\u4ef6\u5730\u5740",allowClear:!0,size:"large"})}),Object(r.jsx)("div",{className:"upload1",style:{width:"85px"},children:Object(r.jsx)(O.a,Object(o.a)(Object(o.a)({},v),{},{maxCount:1,children:Object(r.jsx)(f.a,{size:"large",children:"Browse"})}))}),Object(r.jsx)("div",{className:"button1",style:{width:"120px"},children:Object(r.jsx)(f.a,{icon:Object(r.jsx)(g.a,{}),type:"primary",onClick:w,disabled:0===n.length,loading:d,size:"large",style:{width:"120px"},children:d?"Uploading":"Upload"})})]})}function w(e){var t=Object(i.useState)(""),c=Object(u.a)(t,2),n=c[0],a=c[1],s=Object(i.useState)(""),l=Object(u.a)(s,2),o=l[0],d=l[1],j=Object(i.useState)(""),b=Object(u.a)(j,2),h=b[0],p=b[1];return Object(i.useEffect)((function(){d(""===n?"":"https://ipfs.io/ipfs/"+n),p(""===n?"":"https://dweb.link/ipns/ipnso.com/?cid="+n)}),[n]),Object(i.useEffect)((function(){a(e.cid)}),[e.cid]),Object(r.jsxs)("div",{id:"textTip-id",children:[Object(r.jsxs)("p",{children:["File uploaded to:",Object(r.jsx)("br",{}),n]}),Object(r.jsxs)("p",{children:["You Can access the file using public gateways now:",Object(r.jsx)("br",{}),Object(r.jsx)("a",{href:"https://ipfs.io/ipfs/"+n,target:"_blank",rel:"noreferrer","white-space":"nowrap",children:o}),Object(r.jsx)("br",{}),Object(r.jsx)("a",{href:"https://dweb.link/ipns/ipnso.com/?cid="+n,target:"_blank",rel:"noreferrer","white-space":"nowrap",children:h})]})]})}var N=function(){var e=Object(i.useState)(""),t=Object(u.a)(e,2),c=t[0],n=t[1],a=Object(i.useState)(0),s=Object(u.a)(a,2),l=s[0],o=s[1];return Object(r.jsxs)("div",{className:"uploader-div",children:[Object(r.jsx)("div",{className:"title",children:Object(r.jsx)("h1",{children:"IPFS File Uploader"})}),Object(r.jsx)("div",{className:"inputFile-div",children:Object(r.jsx)(v,{changeCid:function(e){n(e)},changePercent:function(e){o(e)}})}),Object(r.jsx)("div",{className:"progress",children:Object(r.jsx)(x.a,{percent:l,status:"normal",showInfo:!0,style:{width:"46%",left:"-1%"}})}),Object(r.jsx)("div",{className:"textTip-div",children:Object(r.jsx)(w,{cid:c})})]})};var k=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(l,{}),Object(r.jsx)(N,{})]})},y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,221)).then((function(t){var c=t.getCLS,i=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),i(e),n(e),a(e),s(e)}))};s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root")),y()}},[[214,1,2]]]);
//# sourceMappingURL=main.1a24a22c.chunk.js.map