{"version":3,"sources":["header.tsx","uploader.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["MyHeader","className","src","alt","href","target","rel","InputFile","props","useState","fileList","setFileList","uploading","setUploading","uploadProps","onRemove","file","list","index","indexOf","newFileList","slice","splice","beforeUpload","changeCid","changePercent","handleUpload","a","client","Web3Storage","token","onRootCidReady","cid","console","log","totalSize","map","f","size","reduce","b","undefined","uploaded","onStoredChunk","pct","toFixed","message","success","put","name","wrapWithDirectory","maxRetries","style","width","addonBefore","placeholder","allowClear","maxCount","icon","UploadOutlined","type","onClick","disabled","length","loading","TextTip","setCid","url1","setUrl1","url2","setUrl2","useEffect","id","white-space","Uploader","percent","setPercent","status","showInfo","left","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9a4a8ccb.chunk.js","sourcesContent":["import React from 'react';\nimport './header.css';\n\nfunction MyHeader() {\n\treturn (\n\t\t<div className=\"header-div\">\n\t\t\t<div className=\"header-img\">\n\t\t\t\t<img src={'https://gitee.com/qxxiao_hust/pic/raw/master/img/20211029144222.png'} alt=\"logo\" />\n\t\t\t</div>\n\t\t\t<div className=\"header-title\">IPFS-File-Uploader</div>\n\n\t\t\t<div className=\"header-link gateway\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\thref=\"https://ipfs.github.io/public-gateway-checker/\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t>\n\t\t\t\t\tGateway\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<div className=\"header-link github\">\n\t\t\t\t<a\n\t\t\t\t\tclassName=\"link\"\n\t\t\t\t\thref=\"https://github.com/qxxiao/IPFS-File-Upload\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t>\n\t\t\t\t\tGitHub\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default MyHeader;\n","import { Input, Button, Upload, message, Progress } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\nimport './uploader.css';\nimport { SetStateAction, useEffect, useState } from 'react';\n// for web3 storage\n// import { Web3Storage } from 'web3.storage';\nimport { Web3Storage } from 'web3.storage/dist/bundle.esm.min.js';\nimport { UploadFile } from 'antd/lib/upload/interface';\n\n// 浏览文件以及上传按钮组合组件\nfunction InputFile(props: any) {\n\tconst [fileList, setFileList] = useState<UploadFile[]>([]);\n\tconst [uploading, setUploading] = useState<boolean>(false);\n\n\tconst uploadProps = {\n\t\tonRemove: (file: UploadFile<any>): boolean => {\n\t\t\tsetFileList(list => {\n\t\t\t\tconst index = list.indexOf(file);\n\t\t\t\tconst newFileList = list.slice();\n\t\t\t\tnewFileList.splice(index, 1);\n\t\t\t\treturn newFileList;\n\t\t\t});\n\t\t\treturn true;\n\t\t},\n\t\tbeforeUpload: (file: UploadFile): boolean => {\n\t\t\tsetFileList(() => {\n\t\t\t\t// return [...list, file];\n\t\t\t\treturn [file]; //最多一个\n\t\t\t});\n\t\t\tprops.changeCid('');\n\t\t\tprops.changePercent(0);\n\t\t\treturn false; //手动上传\n\t\t},\n\t\tfileList,\n\t};\n\n\tconst handleUpload = async () => {\n\t\tsetUploading(true);\n\n\t\tconst client = new Web3Storage({\n\t\t\ttoken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDQ0RTFDMzZkREM5NjI2MjY1ZWM5OWJhNkUwYzZmZDE0Y0I3MjA2NkUiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2MzU1NzM4NzIyNTYsIm5hbWUiOiJ1cGxvYWRlciJ9.qJ4Q_9IaazEYoy9qey5dCVCGw7O315kbbODobUnBW1I',\n\t\t});\n\n\t\tconst onRootCidReady = (cid: any) => {\n\t\t\tconsole.log('uploading files with cid:', cid);\n\t\t\t//修改cid\n\t\t\tprops.changeCid(cid);\n\t\t};\n\n\t\tconst totalSize = fileList\n\t\t\t.map(f => f.size)\n\t\t\t.reduce((a, b) => (a === undefined ? 0 : a) + (b === undefined ? 0 : b), 0);\n\t\tlet uploaded = 0;\n\n\t\tconst onStoredChunk = (size: number) => {\n\t\t\tuploaded += size;\n\t\t\tconst pct = (uploaded / (totalSize as number)) * 100;\n\t\t\tconsole.log(`Uploading... ${pct.toFixed(2)}% complete`);\n\t\t\t// 修改进度条\n\t\t\tif (uploaded >= (totalSize as number)) {\n\t\t\t\tsetUploading(false);\n\t\t\t\tmessage.success('上传文件成功!');\n\t\t\t}\n\t\t\tprops.changePercent(pct);\n\t\t};\n\n\t\treturn client.put(fileList, {\n\t\t\tname: fileList[0].name,\n\t\t\twrapWithDirectory: false,\n\t\t\tmaxRetries: 3,\n\t\t\tonRootCidReady,\n\t\t\tonStoredChunk,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"inputFile1\">\n\t\t\t<div className=\"input1\" style={{ width: '65%' }}>\n\t\t\t\t<Input\n\t\t\t\t\taddonBefore=\"http://\"\n\t\t\t\t\tplaceholder=\"上传的文件地址\"\n\t\t\t\t\tallowClear\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t// value={filename.current}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"upload1\" style={{ width: '85px' }}>\n\t\t\t\t<Upload {...uploadProps} maxCount={1}>\n\t\t\t\t\t<Button size=\"large\">Browse</Button>\n\t\t\t\t</Upload>\n\t\t\t</div>\n\t\t\t<div className=\"button1\" style={{ width: '120px' }}>\n\t\t\t\t<Button\n\t\t\t\t\ticon={<UploadOutlined />}\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tonClick={handleUpload}\n\t\t\t\t\tdisabled={fileList.length === 0}\n\t\t\t\t\tloading={uploading}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tstyle={{ width: '120px' }}\n\t\t\t\t>\n\t\t\t\t\t{uploading ? 'Uploading' : 'Upload'}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n// 上传后文显示组件\nfunction TextTip(props: any) {\n\tconst [cid, setCid] = useState('');\n\tconst [url1, setUrl1] = useState('');\n\tconst [url2, setUrl2] = useState('');\n\n\tuseEffect(() => {\n\t\tsetUrl1(cid === '' ? '' : 'https://ipfs.io/ipfs/' + cid);\n\t\tsetUrl2(cid === '' ? '' : 'https://dweb.link/ipns/ipnso.com/?cid=' + cid);\n\t}, [cid]);\n\n\tuseEffect(() => {\n\t\tsetCid(props.cid);\n\t}, [props.cid]);\n\n\treturn (\n\t\t<div id=\"textTip-id\">\n\t\t\t<p>\n\t\t\t\tFile uploaded to:\n\t\t\t\t<br />\n\t\t\t\t{cid}\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tYou Can access the file using public gateways now:\n\t\t\t\t<br />\n\t\t\t\t<a href={'https://ipfs.io/ipfs/' + cid} target=\"_blank\" rel=\"noreferrer\" white-space=\"nowrap\">\n\t\t\t\t\t{url1}\n\t\t\t\t</a>\n\t\t\t\t<br />\n\t\t\t\t<a\n\t\t\t\t\thref={'https://dweb.link/ipns/ipnso.com/?cid=' + cid}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\twhite-space=\"nowrap\"\n\t\t\t\t>\n\t\t\t\t\t{url2}\n\t\t\t\t</a>\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n\n// uploader总组件\n// 标题\n// 按钮\n// 文字显示\nfunction Uploader() {\n\tconst [cid, setCid] = useState('');\n\tconst [percent, setPercent] = useState(0);\n\n\treturn (\n\t\t<div className=\"uploader-div\">\n\t\t\t<div className=\"title\">\n\t\t\t\t<h1>IPFS File Uploader</h1>\n\t\t\t</div>\n\t\t\t<div className=\"inputFile-div\">\n\t\t\t\t<InputFile\n\t\t\t\t\tchangeCid={(cid: SetStateAction<string>) => {\n\t\t\t\t\t\tsetCid(cid);\n\t\t\t\t\t}}\n\t\t\t\t\tchangePercent={(percent: SetStateAction<number>) => {\n\t\t\t\t\t\tsetPercent(percent);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"progress\">\n\t\t\t\t<Progress percent={percent} status=\"normal\" showInfo={true} style={{ width: '46%', left: '-1%' }} />\n\t\t\t</div>\n\t\t\t<div className=\"textTip-div\">\n\t\t\t\t<TextTip cid={cid} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Uploader;\n","import React from 'react';\nimport './App.css';\nimport MyHeader from './header';\nimport Uploader from './uploader';\n\nfunction App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t\t<MyHeader />\n\t\t\t\t<Uploader />\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}